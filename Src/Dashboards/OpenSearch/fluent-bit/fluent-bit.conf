[SERVICE]
    Daemon Off
    Flush 1
    Log_Level info
    Parsers_File parsers.conf
    HTTP_Server On
    HTTP_Listen 0.0.0.0
    HTTP_Port 2020
    Health_Check On
    storage.path /fluent-bit/storage
    storage.sync normal
    storage.checksum off
    storage.backlog.mem_limit 5M

[INPUT]
    Name tail
    Path /logs/*.json
    Tag app.logs
    Parser json
    Refresh_Interval 1
    Mem_Buf_Limit 5MB
    Skip_Long_Lines On
    DB /fluent-bit/storage/tail.db
    Read_from_Head True

[FILTER]
    Name modify
    Match app.logs
    Add service.name LoggingApp
    Add source fluent-bit

[OUTPUT]
    Name http
    Match app.logs
    Host data-prepper
    Port 2021
    URI /log/ingest
    Format json
    Json_date_key timestamp
    Json_date_format iso8601
    Retry_Limit 5
