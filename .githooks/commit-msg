#!/usr/bin/env bash
#
# Git hook to remove Claude/AI generated text from commit messages
# This ensures commit messages follow the project's commit conventions
#
# Setup: git config core.hooksPath .githooks
#

COMMIT_MSG_FILE="$1"

# Use sed to remove Claude-related lines (more reliable for special characters)
sed -i.bak \
    -e '/Generated with.*Claude/d' \
    -e '/Co-Authored-By:.*Claude/d' \
    -e '/Claude Code/d' \
    "$COMMIT_MSG_FILE"

# Remove trailing blank lines
sed -i.bak -e :a -e '/^\s*$/{$d;N;ba' -e '}' "$COMMIT_MSG_FILE" 2>/dev/null || true

# Clean up backup files
rm -f "$COMMIT_MSG_FILE.bak"

exit 0
